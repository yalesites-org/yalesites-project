id: localist_events
label: 'Localist events'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  urls:
    callback: ys_localist_migrate_url
  item_selector: events
  fields:
    -
      name: event_instance_id
      label: 'Event Instance ID'
      selector: event/event_instances/0/event_instance/id
    -
      name: localist_title
      label: 'Localist title'
      selector: event/title
  ids:
    event_instance_id:
      # This would be an int, but it is too long for the DB
      type: string
process:
  # datetime_start:
  #   plugin: substr
  #   source: start
  #   start: 0
  #   length: 19
  # datetime_end:
  #   plugin: substr
  #   source: end
  #   start: 0
  #   length: 19
  # timezone_start:
  #   plugin: substr
  #   source: start
  #   start: -6
  #   length: 6
  # timezone_end:
  #   plugin: substr
  #   source: end
  #   start: -6
  #   length: 6
  title: localist_title
  field_localist_id: event_instance_id
  # field_localist_date/value:
  #   plugin: format_date
  #   from_format: 'Y-m-d\TH:i:s'
  #   to_format: 'Y-m-d\TH:i:s'
  #   from_timezone:
  #     plugin: timezone_offset
  #     source: '@timezone_start'
  #   to_timezone: 'UTC'
  #   settings:
  #     validate_format: false
  #   source: '@datetime_start'
  # field_localist_date/end_value:
  #   plugin: format_date
  #   from_format: 'Y-m-d\TH:i:s'
  #   to_format: 'Y-m-d\TH:i:s'
  #   from_timezone:
  #     plugin: timezone_offset
  #     source: '@timezone_end'
  #   to_timezone: 'UTC'
  #   settings:
  #     validate_format: false
  #   source: '@datetime_end'

destination:
  plugin: 'entity:node'
  default_bundle: event
# migration_dependencies:
#   required:
#     - localist_event_types
#   optional: []
