id: ys_test_pages
label: 'Test Pages with Layout Builder'
migration_group: ys_test
migration_dependencies:
  required:
    - ys_test_blocks

source:
  plugin: embedded_data
  data_rows:
    - id: test_homepage
      title: 'Migration Test Homepage'
      body: 'This page tests the complete migration workflow with Layout Builder.'
      status: 1
    - id: test_features_page
      title: 'Migration Features Test Page'
      body: 'This page demonstrates complex layouts with multiple block types.'
      status: 1
    - id: test_content_page
      title: 'Content Migration Test Page'
      body: 'This page validates paragraph field processing across different block types.'
      status: 1
  ids:
    id:
      type: string

process:
  type:
    plugin: default_value
    default_value: page
  title: title
  status: status
  uid:
    plugin: default_value
    default_value: 1
  
  # Create comprehensive Layout Builder sections
  layout_builder__layout:
    plugin: configurable_layout_builder
    source: id
    sections:
      # Hero section with text and button
      - layout: layout_onecol
        layout_settings:
          label: 'Hero Section'
        regions:
          content:
            - type: text
              source: migration
              migration_id: ys_test_blocks
              source_id: test_text_block
              view_mode: full
              label_display: false
            - type: button_link
              source: migration
              migration_id: ys_test_blocks
              source_id: test_button_block
              view_mode: full

      # Two column section with accordion and callout
      - layout: layout_twocol
        layout_settings:
          label: 'Content Section'
          column_widths: '67-33'
        regions:
          first:
            - type: accordion
              source: migration
              migration_id: ys_test_blocks
              source_id: test_accordion_block
              view_mode: full
          second:
            - type: callout
              source: migration
              migration_id: ys_test_blocks
              source_id: test_callout_block
              view_mode: full

      # Three column section with facts, gallery, and custom cards
      - layout: layout_threecol_25_50_25
        layout_settings:
          label: 'Feature Section'
        regions:
          first:
            - type: facts
              source: migration
              migration_id: ys_test_blocks
              source_id: test_facts_block
              view_mode: full
          second:
            - type: custom_cards
              source: migration
              migration_id: ys_test_blocks
              source_id: test_custom_cards_block
              view_mode: full
          third:
            - type: gallery
              source: migration
              migration_id: ys_test_blocks
              source_id: test_gallery_block
              view_mode: full

      # Full width tiles section
      - layout: layout_onecol
        layout_settings:
          label: 'Tiles Section'
        regions:
          content:
            - type: tiles
              source: migration
              migration_id: ys_test_blocks
              source_id: test_tiles_block
              view_mode: full
              component_settings:
                label_display: true

destination:
  plugin: 'entity:node'
  default_bundle: page